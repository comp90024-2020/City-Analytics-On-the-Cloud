version: '3'
services:
  master:
    image: registry.gitlab.com/comp90024/project-2:harvest
    environment:
      TZ: "Australia/Melbourne"
    command: "reg {{ inventory_hostname }}"
    ports:
      - 8673:8673
    networks:
        - couch_comp90024
    restart: on-failure
    volumes:
      - ./couchdb.json:/app/couchdb.json
      - ./harvest.json:/app/harvest.json
      - ./twitter.json:/app/twitter.json

networks:
  couch_comp90024:
    external: true
