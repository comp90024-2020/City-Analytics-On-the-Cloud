{"_id": "_design/api-global", "options": {"partitioned": false}, "lists": {}, "shows": {}, "views": {"keyword": {"map": "function (doc) {\n    var sp_doc = doc.full_text.match(/\\w+/g).map((s) => s.toLowerCase());\n    var sp = [...new Set(sp_doc)];\n    for (var i = 0; i < sp.length; i++) {\n        emit([sp[i], doc.sa2_2016_lv12_code], 1);\n    }\n}", "reduce": "_count", "partitioned": false}, "count": {"map": "function (doc) {\n    emit(doc._id, 1);\n}", "reduce": "_count", "partitioned": false}, "count-area": {"map": "function (doc) {\n    emit(doc.sa2_2016_lv12_code, 1);\n}", "reduce": "_count", "partitioned": false}, "weekday": {"map": "function (doc) {\n    var dt = new Date(doc.created_at);\n    var dayofweek = dt.toLocaleString('en-US', {timeZone: 'Australia/Melbourne', weekday: 'short'});\n    emit(dayofweek, dayofweek);\n}", "reduce": "_count", "partitioned": false}, "hour": {"map": "function (doc) {\n    var dt = new Date(doc.created_at);\n    var dt_str = dt.toLocaleTimeString('en-US', {timeZone: 'Australia/Melbourne', hour12: false});\n    var hour = Number(dt_str.split(':')[0]);\n    emit(hour, hour);\n}\n", "reduce": "_count", "partitioned": false}, "sentiment": {"map": "function (doc) {\n  emit([doc.sa2_2016_lv12_code, doc.sentiment_scores ? doc.sentiment_scores.sentiment : 'none'], 1);\n}", "reduce": "_count"}, "hashtags": {"map": "function (doc) {\n  for(hashtag of doc.entities.hashtags){\n     emit( hashtag.text, 1);\n  }\n}", "reduce": "_count"}, "sports-exercise": {"map": "function (doc) {\n    var res_map = {\n      'cricket' :0,\n      'tennis' : 0,\n      'footy' : 0,\n      'motorsport' : 0,\n      'soccer' : 0,\n      'exercise' : 0\n    };\n    var sports_words = {\n      'cricket' : [\"cricket\", \"batsman\", \"bowler\", \"t20\", \"odi\", \"mcg\", \"scg\", \"bbl\", \"bigbash\"],\n      'tennis' : [\"tennis\", \"australianopen\", \"nadal\", \"djokovic\", \"federer\", \"kyrgios\", \"barty\", \"atp\", \"williams\"],\n      'footy' : [\"afl\", \"footy\",\"aussierules\",\"collingwoodfc\",\"richmond_fc\",\"sydneyswans\"],\n      'motorsport' : [\"ferrari\",\"vettel\",\"Lewis\",\"prix\",\"ricciardo\",\"formula1\",\"f1\",\"ausgp\",\"motogp\", \"motorsport\"],\n      'soccer' : [\"fifa\", \"aleague\",\"soccer\",\"liverpool\",\"messi\", \"ronaldo\", \"epl\", \"mufc\", \"ffa\", \"melcity\", \"melbournevictory\"],\n      'exercise' : [\"exercise\",\"workout\",\"gym\",\"yoga\",\"jogging\",\"aerobics\",\"cardio\"]\n    }\n    for(var sport_name in sports_words){\n        for(key in sports_words[sport_name]){\n          if(doc.full_text.includes(sports_words[sport_name][key])){\n              res_map[sport_name] += 1;\n              // log(sports_words[sport_name][key] +\", \"+ doc.full_text)\n          }\n        }\n    }\n    var emit_res=[];\n    for(var sport_name in res_map){\n      emit_res.push(res_map[sport_name]);\n    }\n    if(sum(emit_res)){\n      emit(doc.sa2_2016_lv12_code, emit_res);\n    }\n\n}", "reduce": "_sum"}}, "indexes": {}}